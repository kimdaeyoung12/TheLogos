{{ define "main" }}
<section class="posts-list-section">
    <div class="container">
        <header class="page-header">
            <h1 class="page-title">Posts</h1>
            <p class="page-description">종교, 철학, 공학에 대한 생각과 통찰을 나눕니다</p>
        </header>

        {{ if .Pages }}
        <div class="posts-wrapper">
            <div class="posts-timeline">
                {{ range .Pages.GroupByDate "2006" }}
                <div class="year-group">
                    <h2 class="year-title">{{ .Key }}</h2>
                    <div class="posts-list">
                        {{ range .Pages }}
                        <article class="post-item" itemscope itemtype="https://schema.org/BlogPosting">
                            <div class="post-date-wrapper">
                                <time class="post-date" datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}" itemprop="datePublished">
                                    <span class="date-month">{{ .Date.Format "1월" }}</span>
                                    <span class="date-day">{{ .Date.Format "2일" }}</span>
                                </time>
                            </div>
                            
                            <div class="post-content-wrapper">
                                <header class="post-header">
                                    <h3 class="post-title" itemprop="headline">
                                        <a href="{{ .RelPermalink }}" itemprop="url">{{ .Title }}</a>
                                    </h3>
                                    
                                    <div class="post-meta">
                                        <span class="reading-time">
                                            <svg width="14" height="14" viewBox="0 0 14 14" fill="none" stroke="currentColor" stroke-width="1.5">
                                                <circle cx="7" cy="7" r="6" />
                                                <polyline points="7 3 7 7 9 9" />
                                            </svg>
                                            {{ .ReadingTime }}분 읽기
                                        </span>
                                        
                                        {{ if .Params.categories }}
                                        <span class="post-category">
                                            <svg width="14" height="14" viewBox="0 0 14 14" fill="none" stroke="currentColor" stroke-width="1.5">
                                                <path d="M2 2h10v10H2z"/>
                                                <path d="M2 6h10"/>
                                                <path d="M6 2v10"/>
                                            </svg>
                                            {{ range first 1 .Params.categories }}
                                            <a href="{{ "categories/" | absURL }}{{ . | urlize }}">{{ . }}</a>
                                            {{ end }}
                                        </span>
                                        {{ end }}
                                    </div>
                                </header>
                                
                                {{ with .Summary }}
                                <div class="post-summary" itemprop="description">
                                    {{ . | plainify | truncate 200 }}
                                </div>
                                {{ end }}
                                
                                {{ with .Params.tags }}
                                <div class="post-tags">
                                    <svg width="14" height="14" viewBox="0 0 14 14" fill="none" stroke="currentColor" stroke-width="1.5">
                                        <path d="M2 2v4.586a1 1 0 0 0 .293.707l6 6a1 1 0 0 0 1.414 0l3.586-3.586a1 1 0 0 0 0-1.414l-6-6A1 1 0 0 0 6.586 2H2z" />
                                        <circle cx="4.5" cy="4.5" r="0.5" fill="currentColor" />
                                    </svg>
                                    <ul class="tag-list">
                                        {{ range . }}
                                        <li><a href="{{ "tags/" | absURL }}{{ . | urlize }}" class="tag-link">#{{ . }}</a></li>
                                        {{ end }}
                                    </ul>
                                </div>
                                {{ end }}
                            </div>
                        </article>
                        {{ end }}
                    </div>
                </div>
                {{ end }}
            </div>
        </div>
        
        {{ template "_internal/pagination.html" . }}
        
        {{ else }}
        <div class="empty-state">
            <svg width="80" height="80" viewBox="0 0 80 80" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="10" y="10" width="60" height="60" rx="4" />
                <line x1="20" y1="25" x2="60" y2="25" />
                <line x1="20" y1="35" x2="50" y2="35" />
                <line x1="20" y1="45" x2="55" y2="45" />
                <line x1="20" y1="55" x2="45" y2="55" />
            </svg>
            <h2>아직 게시물이 없습니다</h2>
            <p>곧 흥미로운 글들로 채워질 예정입니다.</p>
        </div>
        {{ end }}
    </div>
</section>

<style>
/* Variables */
:root {
    --primary-color: #3b82f6;
    --primary-dark: #1e40af;
    --secondary-color: #64748b;
    --text-primary: #0f172a;
    --text-secondary: #475569;
    --text-tertiary: #94a3b8;
    --bg-primary: #ffffff;
    --bg-secondary: #f8fafc;
    --bg-tertiary: #f1f5f9;
    --border-color: #e2e8f0;
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
}

/* Dark mode */
@media (prefers-color-scheme: dark) {
    :root {
        --text-primary: #f1f5f9;
        --text-secondary: #cbd5e1;
        --text-tertiary: #64748b;
        --bg-primary: #0f172a;
        --bg-secondary: #1e293b;
        --bg-tertiary: #334155;
        --border-color: #334155;
    }
}

/* Layout */
.posts-list-section {
    min-height: calc(100vh - 200px);
    padding: 60px 0;
    background-color: var(--bg-primary);
}

.container {
    max-width: 900px;
    margin: 0 auto;
    padding: 0 20px;
}

/* Page Header */
.page-header {
    text-align: center;
    margin-bottom: 60px;
}

.page-title {
    font-size: 3rem;
    font-weight: 800;
    color: var(--text-primary);
    margin-bottom: 12px;
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.page-description {
    font-size: 1.25rem;
    color: var(--text-secondary);
    font-weight: 300;
}

/* Posts Timeline */
.posts-timeline {
    position: relative;
    padding-left: 30px;
}

.posts-timeline::before {
    content: '';
    position: absolute;
    left: 0;
    top: 10px;
    bottom: 10px;
    width: 2px;
    background: linear-gradient(to bottom, var(--border-color) 0%, transparent 100%);
}

/* Year Group */
.year-group {
    margin-bottom: 60px;
    position: relative;
}

.year-title {
    font-size: 2rem;
    font-weight: 700;
    color: var(--primary-color);
    margin-bottom: 30px;
    position: relative;
    display: inline-block;
}

.year-title::before {
    content: '';
    position: absolute;
    left: -38px;
    top: 50%;
    transform: translateY(-50%);
    width: 16px;
    height: 16px;
    background: var(--primary-color);
    border-radius: 50%;
    box-shadow: 0 0 0 4px var(--bg-primary), 0 0 0 6px var(--primary-color);
}

/* Post Item */
.post-item {
    display: flex;
    gap: 30px;
    margin-bottom: 40px;
    padding: 30px;
    background: var(--bg-secondary);
    border-radius: 16px;
    transition: all 0.3s ease;
    border: 1px solid var(--border-color);
    position: relative;
}

.post-item::before {
    content: '';
    position: absolute;
    left: -31px;
    top: 50%;
    transform: translateY(-50%);
    width: 8px;
    height: 8px;
    background: var(--text-tertiary);
    border-radius: 50%;
    transition: all 0.3s ease;
}

.post-item:hover {
    transform: translateX(8px);
    box-shadow: var(--shadow-lg);
    border-color: var(--primary-color);
}

.post-item:hover::before {
    background: var(--primary-color);
    width: 12px;
    height: 12px;
    left: -33px;
}

/* Post Date */
.post-date-wrapper {
    flex-shrink: 0;
    width: 80px;
}

.post-date {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 12px;
    background: var(--bg-tertiary);
    border-radius: 12px;
    text-align: center;
}

.date-month {
    font-size: 0.875rem;
    color: var(--text-tertiary);
    font-weight: 500;
}

.date-day {
    font-size: 1.75rem;
    font-weight: 700;
    color: var(--text-primary);
    line-height: 1;
}

/* Post Content */
.post-content-wrapper {
    flex-grow: 1;
    min-width: 0;
}

.post-header {
    margin-bottom: 16px;
}

.post-title {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 8px;
    line-height: 1.3;
}

.post-title a {
    color: var(--text-primary);
    text-decoration: none;
    transition: color 0.2s ease;
}

.post-title a:hover {
    color: var(--primary-color);
}

/* Post Meta */
.post-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    align-items: center;
    color: var(--text-tertiary);
    font-size: 0.875rem;
}

.post-meta > * {
    display: flex;
    align-items: center;
    gap: 6px;
}

.post-meta svg {
    opacity: 0.6;
}

.post-category a {
    color: var(--text-tertiary);
    text-decoration: none;
    transition: color 0.2s ease;
}

.post-category a:hover {
    color: var(--primary-color);
}

/* Post Summary */
.post-summary {
    color: var(--text-secondary);
    line-height: 1.7;
    margin-bottom: 16px;
}

/* Post Tags */
.post-tags {
    display: flex;
    align-items: center;
    gap: 10px;
}

.post-tags svg {
    color: var(--text-tertiary);
    flex-shrink: 0;
}

.tag-list {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    list-style: none;
    margin: 0;
    padding: 0;
}

.tag-link {
    display: inline-block;
    padding: 4px 12px;
    background: var(--bg-tertiary);
    color: var(--text-secondary);
    font-size: 0.813rem;
    border-radius: 6px;
    text-decoration: none;
    transition: all 0.2s ease;
}

.tag-link:hover {
    background: var(--primary-color);
    color: white;
    transform: translateY(-1px);
}

/* Empty State */
.empty-state {
    text-align: center;
    padding: 80px 20px;
    color: var(--text-tertiary);
}

.empty-state svg {
    margin-bottom: 24px;
    opacity: 0.2;
}

.empty-state h2 {
    font-size: 1.5rem;
    color: var(--text-secondary);
    margin-bottom: 8px;
}

/* Pagination */
.pagination {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 8px;
    margin-top: 60px;
}

.pagination li {
    list-style: none;
}

.pagination a,
.pagination span {
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 40px;
    height: 40px;
    padding: 0 16px;
    background: var(--bg-secondary);
    color: var(--text-secondary);
    text-decoration: none;
    border-radius: 8px;
    font-weight: 500;
    transition: all 0.2s ease;
    border: 1px solid var(--border-color);
}

.pagination a:hover {
    background: var(--bg-tertiary);
    color: var(--text-primary);
    border-color: var(--primary-color);
}

.pagination .active span {
    background: var(--primary-color);
    color: white;
    border-color: var(--primary-color);
}

/* Responsive */
@media (max-width: 768px) {
    .page-title {
        font-size: 2rem;
    }
    
    .page-description {
        font-size: 1rem;
    }
    
    .posts-timeline {
        padding-left: 20px;
    }
    
    .year-title::before {
        left: -28px;
    }
    
    .post-item {
        flex-direction: column;
        gap: 16px;
        padding: 20px;
    }
    
    .post-item::before {
        display: none;
    }
    
    .post-date-wrapper {
        width: auto;
    }
    
    .post-date {
        flex-direction: row;
        gap: 8px;
        padding: 8px 16px;
    }
    
    .date-day {
        font-size: 1.25rem;
    }
}
</style>
{{ end }}
