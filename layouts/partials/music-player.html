{{ if .Params.audio }}
<div id="music-player" class="music-player glass-card" data-audio-src="{{ .Params.audio | relURL }}">

    <!-- Volume Control (Hidden by default, shown on hover) -->
    <div class="volume-control-container">
        <input type="range" id="volume-slider" class="glass-slider vertical" min="0" max="1" step="0.01" value="0.2"
            aria-label="Volume">
    </div>

    <!-- Play/Pause Button -->
    <button id="music-control" class="music-control-btn" aria-label="Play Music">
        <svg id="icon-play" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polygon points="5 3 19 12 5 21 5 3"></polygon>
        </svg>
        <svg id="icon-pause" class="hidden" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="6" y="4" width="4" height="16"></rect>
            <rect x="14" y="4" width="4" height="16"></rect>
        </svg>
    </button>

    <!-- Seek Bar / Progress -->
    <div class="seek-bar-container">
        <input type="range" id="seek-slider" class="glass-slider horizontal" min="0" max="100" value="0" step="0.1"
            aria-label="Seek">
    </div>

    <!-- Visualizer (Optional, maybe keep small or remove if seek bar takes space) -->
    <!-- Let's keep it next to the play button for aesthetics if space allows, or hide it -->
    <div class="music-visualizer mobile-hidden">
        <span></span><span></span><span></span><span></span>
    </div>

    <audio id="bgm-audio" preload="auto" loop>
        <source src="/audio/{{ .Params.audio }}" type="audio/mpeg">
    </audio>
</div>

{{/* Load Music Player CSS & JS */}}
{{ $music_css := resources.Get "css/music-player.css" | minify | fingerprint }}
<link rel="stylesheet" href="{{ $music_css.Permalink }}" integrity="{{ $music_css.Data.Integrity }}">

{{ $music_js := resources.Get "js/music-player.js" | fingerprint }}
<script src="{{ $music_js.Permalink }}" integrity="{{ $music_js.Data.Integrity }}"></script>
{{ end }}